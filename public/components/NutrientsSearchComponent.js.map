{"version":3,"sources":["components/NutrientsSearchComponent.js"],"names":["window","FC","undefined","NutrientsSearchComponent","state","form","results","offset","searchParams","query","handleScroll","bind","addEventListener","dietData","deleteCurrentSearch","removeEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","queryStr","offsetAmt","maxCalories","maxFat","maxCarbs","maxProtein","$","ajax","url","type","beforeSend","xhr","setRequestHeader","done","data","concatRecipes","concat","console","log","setState","string","value","evt","preventDefault","validateSearchParams","queryInput","params","storeCurrentNutrientSearch","searchForm","searchResults","callSearch","input","map","recipe","index","image","id","title","React","Component"],"mappings":"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","file":"NutrientsSearchComponent.js","sourcesContent":["if (window.FC === undefined) { window.FC = {}; }\n\n(() => {\n\n  class NutrientsSearchComponent extends React.Component {\n\n    constructor() {\n      super();\n      this.state = { form: true, results: [], offset: 0, searchParams: {}, query: \"\" }\n      this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n      window.addEventListener(\"scroll\", this.handleScroll);\n      FC.dietData.deleteCurrentSearch();\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n\n    handleScroll() {\n      const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      const body = document.body;\n      const html = document.documentElement;\n      const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight,  html.scrollHeight, html.offsetHeight);\n      const windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n\n        var queryStr = this.state.searchParams.queryStr;\n        var offsetAmt = this.state.offset;\n        var maxCalories = this.state.searchParams.maxCalories;\n        var maxFat = this.state.searchParams.maxFat;\n        var maxCarbs = this.state.searchParams.maxCarbs;\n        var maxProtein = this.state.searchParams.maxProtein;\n\n        $.ajax({\n          url: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/searchComplex?limitLicense=false\" + maxCalories + maxCarbs +  maxFat +  maxProtein + \"&number=10&offset=\" + offsetAmt + queryStr + \"&ranking=1\",\n          type: 'GET',\n        \tbeforeSend: function (xhr) {\n        \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n            xhr.setRequestHeader(\"Accept\", \"application/json\");\n        \t}\n        })\n        .done((data) => {\n          var concatRecipes = this.state.results.concat(data.results);\n          console.log(this.state.offset);\n          this.setState({\n            form: false,\n            results: concatRecipes,\n            offset: this.state.offset + 10,\n            searchParams: this.state.searchParams\n          });\n\n        });\n      }\n    }\n\n    validateSearchParams(string, value) {\n\n      if (value === \"\" ) {\n        return \"\";\n      }\n      else {\n        return string + value;\n      }\n\n    }\n\n    callSearch(evt) {\n      evt.preventDefault();\n      var offsetAmt = \"&offset=\" + 0;\n      var queryStr = this.validateSearchParams(\"&query=\", this.queryInput.value);\n      var maxCalories = this.validateSearchParams(\"&maxCalories=\", this.maxCalories.value);\n      var maxFat = this.validateSearchParams(\"&maxFat=\", this.maxFat.value);\n      var maxCarbs = this.validateSearchParams(\"&maxCarbs=\", this.maxCarbs.value);\n      var maxProtein = this.validateSearchParams(\"&maxProtein=\", this.maxProtein.value);\n      \n\n      $.ajax({\n        url: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/searchComplex?limitLicense=false\" + maxCalories + maxCarbs +  maxFat + maxProtein + \"&number=10\" + offsetAmt + queryStr + \"&ranking=1\",\n        type: 'GET',\n      \tbeforeSend: function (xhr) {\n      \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n          xhr.setRequestHeader(\"Accept\", \"application/json\");\n      \t}\n      })\n      .done((data) => {\n\n        var params = {\n          queryStr: queryStr,\n          maxCalories: maxCalories,\n          maxFat: maxFat,\n          maxCarbs: maxCarbs,\n          maxProtein: maxProtein\n        }\n\n        FC.dietData.storeCurrentNutrientSearch(params, data.results, this.queryInput.value, this.state.offset)\n\n        this.setState({\n          form: false,\n          results: data.results,\n          offset: this.state.offset + 10,\n          searchParams: params,\n          query: this.queryInput.value\n        });\n\n      });\n\n    }\n\n    backToSearch() {\n      this.setState({\n        form: true,\n        searchParams: {},\n        query: \"\",\n        offset: 0\n      });\n    }\n\n    render() {\n      var searchForm;\n      var searchResults;\n\n      if (this.state.form === true) {\n        searchForm = <form className=\"react-form\" onSubmit={(evt) => { this.callSearch(evt)}}><input ref={(input) => { this.queryInput = input }} placeholder=\"Recipe Keyword\" />\n        <input ref={(input) => { this.maxCalories = input}} placeholder=\"Max Calories\" />\n        <input ref={(input) => { this.maxFat = input}} placeholder=\"Max Fat\" />\n        <input ref={(input) => { this.maxCarbs = input}} placeholder=\"Max Carbohydrates\" />\n        <input ref={(input) => { this.maxProtein = input}} placeholder=\"Max Protein\" />\n        <button>Search</button></form>\n      } else {\n\n        searchForm = <form className=\"react-form\" onSubmit={(evt) => { this.callSearch(evt)}}><input ref={(input) => { this.queryInput = input }} placeholder=\"Recipe Keyword\" />\n        <input ref={(input) => { this.maxCalories = input}} placeholder=\"Max Calories\" />\n        <input ref={(input) => { this.maxFat = input}} placeholder=\"Max Fat\" />\n        <input ref={(input) => { this.maxCarbs = input}} placeholder=\"Max Carbohydrates\" />\n        <input ref={(input) => { this.maxProtein = input}} placeholder=\"Max Protein\" />\n        <button>Search</button></form>\n        searchResults = <div><h1 className=\"react-form-h1\">Search results for \"{this.state.query}\"</h1>\n        <ul className=\"search-results\">\n          {this.state.results.map((recipe, index) => {\n            return <li key={index}><img src={recipe.image} />\n            <ReactRouter.Link to={\"/recipe/\" + recipe.id}><p>{recipe.title}</p></ReactRouter.Link></li>\n          })}\n        </ul></div>\n      }\n\n      return <div className=\"search-container\"><h1 className=\"react-form-h1\">Search Recipe By Max Nutrients Amounts</h1>\n      {searchForm}{searchResults}</div>\n    }\n  }\n\n  FC.NutrientsSearchComponent = NutrientsSearchComponent;\n\n})()\n"]}