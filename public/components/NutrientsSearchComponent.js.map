{"version":3,"sources":["components/NutrientsSearchComponent.js"],"names":["window","FC","undefined","NutrientsSearchComponent","state","form","results","offset","searchParams","query","handleScroll","bind","addEventListener","removeEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","queryStr","offsetAmt","maxCalories","maxFat","maxCarbs","maxProtein","$","ajax","url","type","beforeSend","xhr","setRequestHeader","done","data","concatRecipes","concat","setState","string","value","evt","preventDefault","validateSearchParams","queryInput","console","log","params","searchForm","searchResults","callSearch","input","backToSearch","map","recipe","index","image","id","title","React","Component"],"mappings":"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","file":"NutrientsSearchComponent.js","sourcesContent":["if (window.FC === undefined) { window.FC = {}; }\n\n(() => {\n\n  class NutrientsSearchComponent extends React.Component {\n\n    constructor() {\n      super();\n      this.state = { form: true, results: [], offset: 0, searchParams: {}, query: \"\" }\n      this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n\n    handleScroll() {\n      const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      const body = document.body;\n      const html = document.documentElement;\n      const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight,  html.scrollHeight, html.offsetHeight);\n      const windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n\n        var queryStr = this.state.searchParams.queryStr;\n        var offsetAmt = this.state.offset;\n        var maxCalories = this.state.searchParams.maxCalories;\n        var maxFat = this.state.searchParams.maxFat;\n        var maxCarbs = this.state.searchParams.maxCarbs;\n        var maxProtein = this.state.searchParams.maxProtein;\n\n        $.ajax({\n          url: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/searchComplex?limitLicense=false\" + maxCalories + maxCarbs +  maxFat +  maxProtein + \"&number=10&offset=\" + offsetAmt + queryStr + \"&ranking=1\",\n          type: 'GET',\n        \tbeforeSend: function (xhr) {\n        \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n            xhr.setRequestHeader(\"Accept\", \"application/json\");\n        \t}\n        })\n        .done((data) => {\n          var concatRecipes = this.state.results.concat(data.results);\n\n          this.setState({\n            form: false,\n            results: concatRecipes,\n            offset: this.state.offset + 10,\n            searchParams: this.state.searchParams\n          });\n\n        });\n      }\n    }\n\n    validateSearchParams(string, value) {\n\n      if (value === \"\" ) {\n        return \"\";\n      }\n      else {\n        return string + value;\n      }\n\n    }\n\n    callSearch(evt) {\n      evt.preventDefault();\n      var offsetAmt = \"&offset=\"+ this.state.offset;\n      var queryStr = this.validateSearchParams(\"&query=\", this.queryInput.value);\n      var maxCalories = this.validateSearchParams(\"&maxCalories=\", this.maxCalories.value);\n      var maxFat = this.validateSearchParams(\"&maxFat=\", this.maxFat.value);\n      var maxCarbs = this.validateSearchParams(\"&maxCarbs=\", this.maxCarbs.value);\n      var maxProtein = this.validateSearchParams(\"&maxProtein=\", this.maxProtein.value);\n      console.log(\"making ajax call\")\n\n      $.ajax({\n        url: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/searchComplex?limitLicense=false\" + maxCalories + maxCarbs +  maxFat + maxProtein + \"&number=10\" + offsetAmt + queryStr + \"&ranking=1\",\n        type: 'GET',\n      \tbeforeSend: function (xhr) {\n      \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n          xhr.setRequestHeader(\"Accept\", \"application/json\");\n      \t}\n      })\n      .done((data) => {\n\n        var params = {\n          queryStr: queryStr,\n          maxCalories: maxCalories,\n          maxFat: maxFat,\n          maxCarbs: maxCarbs,\n          maxProtein: maxProtein\n        }\n\n        this.setState({\n          form: false,\n          results: data.results,\n          offset: this.state.offset + 10,\n          searchParams: params,\n          query: this.queryInput.value\n        });\n        console.log(data);\n      });\n\n    }\n\n    backToSearch() {\n      this.setState({\n        form: true,\n        searchParams: {},\n        query: \"\",\n        offset: 0\n      });\n    }\n\n    render() {\n      var searchForm;\n      var searchResults;\n\n      if (this.state.form === true) {\n        searchForm = <form onSubmit={(evt) => { this.callSearch(evt)}}><input ref={(input) => { this.queryInput = input }} placeholder=\"Recipe Keyword\" />\n        <input ref={(input) => { this.maxCalories = input}} placeholder=\"Max Calories\" />\n        <input ref={(input) => { this.maxFat = input}} placeholder=\"Max Fat\" />\n        <input ref={(input) => { this.maxCarbs = input}} placeholder=\"Max Carbohydrates\" />\n        <input ref={(input) => { this.maxProtein = input}} placeholder=\"Max Protein\" />\n        <button>Search</button></form>\n      } else {\n\n        searchForm = <div><button onClick={() => { this.backToSearch(); }}>New Search</button></div>\n        searchResults = <div><h1>Search results for \"{this.state.query}\"</h1>\n        <ul className=\"search-results\">\n          {this.state.results.map((recipe, index) => {\n            return <li key={index}><img src={recipe.image} />\n            <ReactRouter.Link to={\"/recipe/\" + recipe.id}><p>{recipe.title}</p></ReactRouter.Link></li>\n          })}\n        </ul></div>\n      }\n\n      return <div className=\"search-container\"><h1>Nutrients Search Thing</h1>\n      {searchForm}{searchResults}</div>\n    }\n  }\n\n  FC.NutrientsSearchComponent = NutrientsSearchComponent;\n\n})()\n"]}