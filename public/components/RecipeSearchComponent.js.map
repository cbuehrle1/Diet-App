{"version":3,"sources":["components/RecipeSearchComponent.js"],"names":["window","FC","undefined","RecipeSearchComponent","state","baseUri","results","form","offset","handleScroll","bind","addEventListener","removeEventListener","windowHeight","innerHeight","document","documentElement","offsetHeight","body","html","docHeight","Math","max","scrollHeight","clientHeight","windowBottom","pageYOffset","queryStr","queryInput","value","offsetAmt","$","ajax","url","type","beforeSend","xhr","setRequestHeader","done","data","concatRecipes","concat","setState","evt","preventDefault","searchForm","searchResults","imageUrl","input","callSearch","map","recipe","id","image","title","readyInMinutes","React","Component"],"mappings":"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","file":"RecipeSearchComponent.js","sourcesContent":["if (window.FC === undefined) { window.FC = {}; }\n\n(() => {\n\n  class RecipeSearchComponent extends React.Component {\n\n    constructor() {\n      super()\n      this.state = { baseUri: \"\",\n      results: [],\n      form: true,\n      offset: 1\n      }\n      this.handleScroll = this.handleScroll.bind(this);\n    }\n\n    componentDidMount() {\n      window.addEventListener(\"scroll\", this.handleScroll);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener(\"scroll\", this.handleScroll);\n    }\n\n    handleScroll() {\n      const windowHeight = \"innerHeight\" in window ? window.innerHeight : document.documentElement.offsetHeight;\n      const body = document.body;\n      const html = document.documentElement;\n      const docHeight = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight,  html.scrollHeight, html.offsetHeight);\n      const windowBottom = windowHeight + window.pageYOffset;\n\n      if (windowBottom >= docHeight) {\n\n        var queryStr = this.queryInput.value;\n        var offsetAmt = this.state.offset;\n\n        $.ajax({\n          url: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/search?number=10&offset=\" + offsetAmt + \"&query=\" + queryStr,\n          type: 'GET',\n        \tbeforeSend: function (xhr) {\n        \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n            xhr.setRequestHeader(\"Accept\", \"application/json\");\n        \t}\n        })\n        .done((data) => {\n          var concatRecipes = this.state.results.concat(data.results);\n\n          this.setState({\n            baseUri: data.baseUri,\n            results: concatRecipes,\n            form: false,\n            offset: this.state.offset + 10\n          });\n        });\n      }\n    }\n\n    callSearch(evt) {\n      evt.preventDefault();\n      var queryStr = this.queryInput.value;\n\n      $.ajax({\n      \turl: \"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/search?number=10&offset=0&query=\" + queryStr,\n      \ttype: 'GET',\n      \tbeforeSend: function (xhr) {\n      \t\txhr.setRequestHeader(\"X-Mashape-Key\", \"lfLi0pd5ComshP5lbLvR2GHC5uP6p1b7AOujsnP5aI9GJrDgG1\");\n          xhr.setRequestHeader(\"Accept\", \"application/json\");\n      \t}\n      })\n      .done((data) => {\n\n        this.setState({\n          baseUri: data.baseUri,\n          results: data.results,\n          form: false,\n          offset: this.state.offset\n        });\n\n      })\n\n    }\n\n\n    render() {\n\n      var searchForm;\n      var searchResults;\n      var imageUrl;\n\n      if (this.state.form === true) {\n        searchForm = <form><input ref={(input) => { this.queryInput = input }} placeholder=\"Search\" /><button onClick={(evt) => { this.callSearch(evt); }}>Search</button></form>\n      } else if (this.state.form === false) {\n        imageUrl = this.state.baseUri\n        searchForm = <form><input ref={(input) => { this.queryInput = input }} placeholder=\"Search\" /><button onClick={(evt) => { this.callSearch(evt); }}>Search</button></form>\n        searchResults = <div><h1>Search results for \"{this.queryInput.value}\"</h1>\n         <ul className=\"search-results\">\n          {this.state.results.map((recipe) => {\n            return <li key={recipe.id}><img src={imageUrl + recipe.image} />\n            <p>{recipe.title}</p><p>Ready in {recipe.readyInMinutes} minutes</p></li>\n          })}\n         </ul>\n         </div>\n      }\n\n      return <div className=\"search-container\">{searchForm}{searchResults}</div>\n    }\n  }\n\n  FC.RecipeSearchComponent = RecipeSearchComponent;\n})()\n"]}