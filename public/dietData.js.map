{"version":3,"sources":["dietData.js"],"names":["window","FC","undefined","storedInfo","userInfo","dietInfo","catagoryInfo","currentSearchInfo","queryStr","offset","baseUri","currentNutrientSearchInfo","paramObj","nutQueryStr","nutOffset","dietData","getCatagories","user","diet","userVar","dietVar","diets","length","callbacks","forEach","cb","activeDiet","active","id","$","ajax","url","done","data","console","log","getDiets","recipeInfo","loadUser","registerCallback","push","deleteDiet","method","storeRecipeInfo","sendRecipeInfo","info","getSavedRecipe","catagoryId","recipeId","detailedRecipeInfo","selectedCatagory","catagories","catagory","recipes","recipe","getDietInfo","onUnmount","toRemove","callback","index","splice","storeCurrentSearch","results","query","offsetNum","link","deleteCurrentSearch","getCurrentSearch","sendObj","offSet","base","searchArrConcat","arr","concat","storeCurrentNutrientSearch","params","deleteCurrentNutrientSearch","getCurrentNutrientSearch"],"mappings":"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","file":"dietData.js","sourcesContent":["if (window.FC === undefined) { window.FC = {}; }\n\n(() => {\n\n  var storedInfo = {\n    userInfo: {},\n    dietInfo: {},\n    catagoryInfo: {}\n  }\n\n  var currentSearchInfo = []\n  var queryStr;\n  var offset;\n  var baseUri;\n\n  var currentNutrientSearchInfo = []\n  var paramObj;\n  var nutQueryStr;\n  var nutOffset;\n\n\n  window.FC.dietData = {\n\n    getCatagories: function (user, diet) {\n      var userVar = user;\n      var dietVar = diet;\n\n      if (dietVar.diets.length === 0) {\n\n        this.callbacks.forEach((cb) => { cb(userVar, dietVar); })\n      }\n      else {\n\n        var activeDiet;\n\n        dietVar.diets.forEach((diet) => {\n          if (diet.active === true) {\n            activeDiet = diet.id;\n          }\n\n        });\n\n        if (activeDiet === undefined) {\n          this.callbacks.forEach((cb) => { cb(userVar, dietVar); })\n        }\n        else {\n          $.ajax({\n            url: \"/api/catagory/\" + activeDiet\n          })\n          .done((data) => {\n\n            storedInfo.catagoryInfo = data;\n            console.log(this.callbacks);\n            this.callbacks.forEach((cb) => { cb(userVar, dietVar, data); })\n          })\n\n        }\n\n      }\n\n    },\n\n    getDiets: function(user) {\n      var userVar = user;\n\n      $.ajax({\n        url: \"/api/diet\"\n      })\n      .done((data) => {\n        storedInfo.dietInfo = data;\n        this.getCatagories(user, data);\n      });\n\n    },\n\n    callbacks: [],\n    recipeInfo: [],\n\n    loadUser: function() {\n      $.ajax({\n        url: \"api/user\"\n      })\n      .done((data) => {\n        storedInfo.userInfo = data;\n        this.getDiets(data);\n      })\n    },\n\n    registerCallback: function(cb) {\n      this.callbacks.push(cb);\n    },\n\n    deleteDiet: function(diet) {\n      $.ajax({\n        url: \"api/diet/\" + diet,\n        method: \"DELETE\"\n      })\n      .done((data) => {\n        this.loadUser();\n      });\n    },\n\n    storeRecipeInfo: function(data) {\n      this.recipeInfo.push(data);\n    },\n\n    sendRecipeInfo: function() {\n\n      var info = {\n        catagoryInfo: storedInfo.catagoryInfo,\n        recipeInfo: this.recipeInfo\n      }\n\n      return info;\n    },\n\n    getSavedRecipe: function(catagoryId, recipeId) {\n      var detailedRecipeInfo;\n      var selectedCatagory;\n\n        storedInfo.catagoryInfo.catagories.forEach((catagory) => {\n\n          if (catagory.id === catagoryId) {\n\n            selectedCatagory = catagory;\n          }\n\n        });\n\n        //BUG: This is a workaround for componentWillReceiveProps on SavedRecipeDetailComponent firing\n        //  twice, first with old data. Find real fix.\n        if (selectedCatagory === undefined) {\n\n          return storedInfo.catagoryInfo.catagories[0].recipes[0];\n        }\n\n        selectedCatagory.recipes.forEach((recipe) => {\n\n          if (recipe.id === recipeId) {\n            detailedRecipeInfo = recipe\n          }\n\n        });\n\n        return detailedRecipeInfo;\n      },\n\n      getDietInfo: function () {\n        return storedInfo.dietInfo;\n      },\n\n      onUnmount: function(toRemove) {\n\n        this.callbacks.forEach((callback, index) => {\n\n          if (toRemove === callback) {\n            this.callbacks.splice(index - 1, 1);\n          }\n\n        });\n\n\n      },\n\n      storeCurrentSearch: function(results, query, offsetNum, link) {\n\n        queryStr = query;\n        offset = offsetNum;\n        baseUri = link;\n        currentSearchInfo.push(results);\n\n      },\n\n      deleteCurrentSearch: function() {\n        currentSearchInfo = []\n        queryStr;\n        offset;\n        baseUri;\n      },\n\n      getCurrentSearch: function() {\n\n        var sendObj = {\n          query: queryStr,\n          offSet: offset,\n          base: baseUri\n        }\n\n        if (currentSearchInfo.length > 0) {\n\n          var searchArrConcat = []\n\n          currentSearchInfo.forEach( (arr, index) => {\n            searchArrConcat = searchArrConcat.concat(arr)\n          });\n          sendObj.data = searchArrConcat;\n          return sendObj;\n        }\n        else {\n          sendObj.data = currentSearchInfo[0]\n          return sendObj;\n        }\n\n      },\n\n      storeCurrentNutrientSearch: function(params, results, query, offsetNum) {\n        paramObj = params;\n        nutQueryStr = query;\n        nutOffset = offsetNum;\n        currentNutrientSearchInfo.push(results);\n      },\n\n      deleteCurrentNutrientSearch() {\n        paramObj;\n        nutQueryStr;\n        nutOffset;\n        currentNutrientSearchInfo = []\n      },\n\n      getCurrentNutrientSearch() {\n\n        var sendObj = {\n          query: nutQueryStr,\n          offset: nutOffset,\n          params: paramObj\n        }\n\n        console.log(sendObj.offset)\n\n        if (currentNutrientSearchInfo.length > 0) {\n\n          var searchArrConcat = []\n\n          currentNutrientSearchInfo.forEach( (arr, index) => {\n            searchArrConcat = searchArrConcat.concat(arr)\n          });\n          sendObj.data = searchArrConcat;\n          return sendObj;\n        }\n        else {\n          sendObj.data = currentSearchInfo[0]\n          return sendObj;\n        }\n\n      }\n\n    }\n\n})();\n"]}